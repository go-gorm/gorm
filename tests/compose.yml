services:
  mysql:
    image: 'mysql:latest'
    ports:
      - "127.0.0.1:9910:3306"
    environment:
      - MYSQL_DATABASE=gorm
      - MYSQL_USER=gorm
      - MYSQL_PASSWORD=gorm
      - MYSQL_RANDOM_ROOT_PASSWORD="yes"
  postgres:
    image: 'postgres:latest'
    ports:
      - "127.0.0.1:9920:5432"
    environment:
      - TZ=Asia/Shanghai
      - POSTGRES_DB=gorm
      - POSTGRES_USER=gorm
      - POSTGRES_PASSWORD=gorm
  mssql:
    image: '${MSSQL_IMAGE}:latest'
    ports:
      - "127.0.0.1:9930:1433"
    environment:
      - TZ=Asia/Shanghai
      - ACCEPT_EULA=Y
      - MSSQL_SA_PASSWORD=LoremIpsum86
  tidb:
    image: 'pingcap/tidb:v6.5.0'
    ports:
      - "127.0.0.1:9940:4000"
    command: /tidb-server -store unistore -path "" -lease 0s > tidb.log 2>&1 &
  gaussdb:
    image: 'opengauss/opengauss:7.0.0-RC1.B023'
    ports:
      - "127.0.0.1:9950:5432"
    environment:
      - TZ=Asia/Shanghai
      - GS_PASSWORD=Gaussdb@123
    command: ["sh", "-c", "gaussdb & while ! gsql -U gaussdb -W Gaussdb@123 -c 'SELECT 1;' >/dev/null 2>&1; do sleep 1; done && gsql -U gaussdb -W Gaussdb@123 -c 'CREATE DATABASE gorm;' && wait"]
